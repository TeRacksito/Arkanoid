<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="css/general.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arkanoid</title>
  </head>

  <body>
    <div>
      <canvas id="render"></canvas>
    </div>

    <script>
      const objects = { blocks: [], balls: [], player: [], interface: [] };

      function pausecomp(millis) {
        var date = new Date();
        var curDate = null;
        do {
          curDate = new Date();
        } while (curDate - date < millis);
      }

      function intersectionOf(line1, line2) {
        const { x1: x1_1, y1: y1_1, x2: x2_1, y2: y2_1 } = line1;
        const { x1: x1_2, y1: y1_2, x2: x2_2, y2: y2_2 } = line2;

        const denominator =
          (y2_2 - y1_2) * (x2_1 - x1_1) - (x2_2 - x1_2) * (y2_1 - y1_1);

        if (denominator === 0) {
          return null;
        }

        const numerator =
          (x2_2 - x1_2) * (y1_1 - y1_2) - (y2_2 - y1_2) * (x1_1 - x1_2);

        const t = numerator / denominator;
        const intersectionPoint = {
          x: x1_1 + t * (x2_1 - x1_1),
          y: y1_1 + t * (y2_1 - y1_1),
        };

        return intersectionPoint;
      }

      function isPointInSemiline(startPoint, throughPoint, testPoint) {
        const { x: x1, y: y1 } = startPoint;
        const { x: x2, y: y2 } = throughPoint;
        const { x: x3, y: y3 } = testPoint;

        let slope1 = ((y2 - y1) / (x2 - x1));
        let slope2 = (y3 - y1) / (x3 - x1);

        let abs_slope1 = Math.abs(slope1);
        let abs_slope2 = Math.abs(slope2);

        if (slope1 != slope2 && (Math.round(slope1) != Math.round(slope2) || Math.max(abs_slope1, abs_slope2) - Math.min(abs_slope1, abs_slope2) > 0.000001)) {
          return false;
        }

        let r = (x3 - x1) / (x2 - x3);

        console.log(r);

        if (r < 0 && r > -1) {
          return false;
        }

        return true;
      }
    </script>

    <script src="https://npmcdn.com/regl@1.3.9/dist/regl.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.7.1/gl-matrix-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/onecolor/3.1.0/one-color-all.js"></script>

    <script type="module" src="js/ctr.js"></script>
  </body>
</html>
